<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <title>Item Master</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Sarabun Font -->
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%);
      font-family: 'Sarabun', sans-serif;
      padding: 20px;
    }
    .card-container {
      max-width: 1000px;
      margin: 0 auto;
      background-color: #fff;
      border-radius: 2rem;
      box-shadow: 0 8px 40px rgba(0,0,0,0.09);
      padding: 2rem;
    }
    .card-container h2 {
      font-size: 2rem;
      font-weight: 700;
      color: #bfa14c; /* gold */
      margin-bottom: 1rem;
    }
    .btn-gradient {
      background: linear-gradient(90deg, #5e72e4 0%, #825ee4 100%);
      border: none;
      color: #fff;
      padding: 0.45rem 1.2rem;
      font-size: 1rem;
      border-radius: 1.5rem;
      transition: background 0.2s;
    }
    .btn-gradient:hover {
      background: linear-gradient(90deg, #7b83eb 0%, #a88fed 100%);
    }
    .btn-delete {
      background: #e3342f;
      color: #fff;
      padding: 0.35rem 1rem;
      border-radius: 1.5rem;
      border: none;
      transition: background 0.2s;
    }
    .btn-delete:hover {
      background: #c53030;
      color: #fff;
    }
    .link-btn {
      color: #5e72e4;
      text-decoration: none;
      margin-left: 0.75rem;
    }
    .link-btn:hover {
      text-decoration: underline;
    }
    .table th {
      background: #825ee4;
      color: #fff;           
  }
  </style>
</head>
<body>
  <div class="card-container">
    <h2>ตาราง Item Master</h2>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="alert alert-warning">
          {% for m in messages %}{{ m }}<br>{% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <form method="post" class="mb-4">
      <fieldset class="border p-3 rounded-3">
        <legend class="float-none w-auto px-2" style="color:#5e72e4;font-weight:600;">เพิ่มวัตถุดิบ</legend>
        <div class="row g-3">
          <div class="col-md-3">
            <label class="form-label">รหัส:</label>
            <input name="item_code" class="form-control" required>
          </div>
          <div class="col-md-5">
            <label class="form-label">ชื่อ:</label>
            <input name="item_name" class="form-control" required>
          </div>
          <div class="col-md-3">
            <label class="form-label">หน่วยมาตรฐาน:</label>
            <input name="default_unit" class="form-control" value="PCS" list="unitlist">
            <datalist id="unitlist">
              <option>KG</option>
              <option>PCS</option>
              <option>UNIT</option>
              <option>PACK</option>
            </datalist>
          </div>
          <div class="col-md-1 d-flex align-items-end">
            <button class="btn-gradient" type="submit">Save</button>
          </div>
        </div>
      </fieldset>
    </form>

    <div class="table-responsive">
      <table class="table table-bordered align-middle">
        <thead>
          <tr>
            <th>รหัส</th>
            <th>รายการวัตถุดิบ</th>
            <th>หน่วย</th>
            <th>สถานะ</th>
            <th>จัดการ</th>
          </tr>
        </thead>
        <tbody>
          {% for r in rows %}
            <tr>
              <td>{{ r[1] }}</td>
              <td>{{ r[2] }}</td>
              <td>{{ r[3] }}</td>
              <td>{{ 'ใช้งาน' if r[4] else 'ปิด' }}</td>
              <td>
                <a class="btn btn-sm btn-gradient me-1" href="{{ url_for('items_edit', item_id=r[0]) }}">Edit</a>
                <form action="{{ url_for('items_delete', item_id=r[0]) }}" method="post" style="display:inline" onsubmit="return confirm('ลบรายการนี้?')">
                  <button class="btn btn-sm btn-delete" type="submit">Delete</button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <p class="mt-3">
      <!-- <a href="{{ url_for('item_received') }}" class="link-btn">ไปฟอร์มบันทึกรับเข้า</a>
      <span>|</span> -->
      <a href="{{ url_for('receipts') }}" class="link-btn">รายงาน/Export (Receipts)</a>
      <span>|</span>  
      <!-- ปุ่มกลับหน้า Home แบบลอยซ้ายล่าง -->
         <a href="{{ url_for('home') }}" class="link-btn">
            <i class="bi bi-house-door"></i>
        กลับหน้า Home
        </a>
    </p>
  </div>
</body>
</html>